---
layout: post
permalink: /2006/06/post_19.html
title: "ベンチャー流サーバ構築のススメ(ハードウェア編)"
date: 2006-06-19T17:30:36.00+09:00
tags:
  - "masato"
categories:
  - "Tips"
---
尾藤正人です。<br />
<br />
ウノウでは<a href="http://www.unoh.net/news/2006/05/post_14.html">最近新オフィスに引越し</a>したのですが、新オフィスにサーバルームを設置してフォト蔵のサーバをホスティング業者から自社サーバに移行しました。<br />
<br />
自社サーバに移行のは下記のような理由からです。<br />
<br />
<ul><br />
<li>フォト蔵のようなストレージ系のサービスの場合、十分な帯域を確保する必要があるが、広帯域を確保するにはコストがかかる<br />
<li>フォト蔵のようなストレージ系サービスの場合、大容量のHDDが必要になるが、大容量のHDDを搭載したマシンはハイエンドマシンになり、増設コストがかかる<br />
<li>マシンの増設に時間がかかりフレキシブルに対応できない<br />
</ul><br />
<br />
というわけで自社サーバに移行したわけですが、自社サーバに移行するにあたって様々なノウハウがたまってきました。<br />
サーバ構築にはいろいろトピックスがありますが、今回はハードウェア的な部分について書きたいと思います。<br />
<br />
・マシンは全て同じ構成にする<br />
<br />
数多くのサーバを運用するには大変なので、ハードウェアの構成は極力同じにします。<br />
CPU、メモリ、HDD全て同じ構成にします。<br />
構成が同じ場合だと何か障害があったときにすぐに代替ができるというメリットもあります。<br />
<br />
フォト蔵の場合は大容量HDDが必要な特殊なサービスなので、2つの構成のマシンを用意しました。<br />
DBサーバには大容量HDDは必要ありませんので。<br />
<br />
通常は全て同じ構成のマシンでいいと思います。<br />
<br />
・サーバはDELLで購入<br />
<br />
何はなくともDELLです。価格.com で調べてパーツを個別に買って組み立てるよりもDELLの方が断然安いです。<br />
DELLで一括購入するとマシン構成が同じになるというメリットもあります。<br />
<br />
・1Uではなく筐体マシンを購入<br />
<br />
1Uだと確かにスペースが有効活用できるのですが、1Uの場合は「高い」「うるさい」「熱がこもる」というデメリットがあります。<br />
熱がこもると放熱にも気を使わないといけなくて、高価な冷却システムが必要になってきます。<br />
<br />
ウノウではDELL SC430を並べて使ってます。<br />
導入してわかったことですが、SC430 はかなり静かです。<br />
サーバルームの隣が応接室兼会議室なのですが、全く聞こえません。<br />
<br />
日本のトップクラスのアクセスを処理するサーバは、また話が違うのでしょうが、<br />
せいぜい数十台で運用する場合は筐体マシンで十分です。<br />
<br />
・エレクタにマシンを格納<br />
<br />
<a href="http://photozou.jp/photo/show/1/807149"><img src="http://photozou.jp/pub/1/1/photo/807149.jpg" alt="サーバ群" width="450" height="337" style="border: solid 1px #000;"></a><br><a href="http://photozou.jp/photo/show/1/807149">サーバ郡</a> posted from <a href="http://photozou.jp/">フォト蔵</a><br />
<br />
1Uを使うと1Uラックに収めるわけですが、1Uラックは高い。<br />
<br />
SC430 は<a href="http://www.erecta.co.jp/erecta/index.html">エレクタ</a>に並べて使ってます。<br />
1万円ぐらいので18台載ります。1Uラックより全然安いです。<br />
<br />
サーバルームは大体2畳ぐらいのスペースがありますが、そこに3つのエレクタを並べてます。<br />
計算上54台まで収納できます。<br />
<br />
・マシンを並べるときは後ろ向きで<br />
<br />
メンテナンスしやすいようにマシンは後ろ向きに並べます。<br />
電源ボタンはほとんど押すことがないので、手が届くだけのスペースを残しています。<br />
<br />
・ケーブルをまとめるのはマジックテープで<br />
<br />
<a href="http://photozou.jp/photo/show/1/807122"><img src="http://photozou.jp/pub/1/1/photo/807122.jpg" alt="マジックテープ" width="450" height="337" style="border: solid 1px #000;"></a><br><a href="http://photozou.jp/photo/show/1/807122">マジックテープ</a> posted from <a href="http://photozou.jp/">フォト蔵</a><br />
<br />
ケーブルはマジックテープでまとめます。<br />
マジックテープを使うと作業中に何度もつけたりはがしたりできて便利です。<br />
安いものなので大量に準備しておきましょう。<br />
<br />
・引越しテープ<br />
<br />
<a href="http://photozou.jp/photo/show/1/807109"><img src="http://photozou.jp/pub/1/1/photo/807109.jpg" alt="引越しテープ" width="450" height="337" style="border: solid 1px #000;"></a><br><a href="http://photozou.jp/photo/show/1/807109">引越しテープ</a> posted from <a href="http://photozou.jp/">フォト蔵</a><br />
<br />
すみません、正式名称がわかりませんでした。<br />
<br />
引越し屋さんが使うべたべたしない、貼ったり剥がしたりが何度もできるテープです。<br />
このテープにいろいろ情報を書いて貼っておきます。<br />
<br />
マシン名とかIPアドレスとか書いて貼っておきます。<br />
そうするとサーバルームに行ったときに一目で分かるのでメンテナンスしやすくなります。<br />
<br />
・イーサネットケーブルは色違いを複数用意する<br />
<br />
<a href="http://photozou.jp/photo/show/1/807139"><img src="http://photozou.jp/pub/1/1/photo/807139.jpg" alt="イーサネットケーブル" width="450" height="337" style="border: solid 1px #000;"></a><br><a href="http://photozou.jp/photo/show/1/807139">イーサネットケーブル</a> posted from <a href="http://photozou.jp/">フォト蔵</a><br />
<br />
同じ色のイーサネットケーブルを使うと、どこがどこに繋がってるか混乱します。<br />
色違いのイーサネットケーブルを用意すると一発で違いが分かって便利です。<br />
<br />
・イーサネットケーブルには長さを書いておく<br />
<br />
引越しテープが役に立ちます。<br />
イーサネットケーブルにはあらかじめ長さを書いたテープを貼っておきます。<br />
最初から長さが分かっていると効率よくネットワーク構築ができます。<br />
<br />
<br />
<br />
今回はサーバ構築にあたってハードウェアの部分を書きました。<br />
ソフトウェアの部分でもいろいろ工夫をしていますので、それについてはまた後日書きたいと思います。
